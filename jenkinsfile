pipeline{
    agent any

    triggers{
        pollSCM('* * * * *')
    }

    stages{
        stage('Initialize'){
            steps{
                sh script: '''pathToPomFile=demo.txt
                version_line=$(cat $pathToPomFile | grep "<version>" | head -1)
                version_line=${version_line#*>}
                version=${version_line%<*}
                IFS="."

                set -- $version
                newPomVersion="$1.$(($2+1)).0"
                echo "$newPomVersion"
                sed -i.bak "/<version>/s/>.*</>${newPomVersion}-SNAPSHOT</" demo.txt''', returnStdout: true 
            }
        }

        stage('Check'){
            steps{
                echo "${demo.txt}"
            }
        }
    }
}